<div class="grid-wrapper form-validation-wrapper " style="width:100%">
    <div class="app-card">
        <mat-card>
            <div class="card-title" style="box-shadow:none !important;">
                <h1 *ngIf="!currentAuditionId">{{'Add Audition' | translate}}</h1>
                <h1 *ngIf="currentAuditionId">{{'Update Audition' | translate}}</h1>
            </div>
            <div class="card-content-content">
                <form [formGroup]="auditionForm">
                    <div class="form-group">
                        <mat-form-field class="inputBox">
                            <input matInput [placeholder]="'Audition Title' | translate" formControlName="ptitle">
                        </mat-form-field>
                        <span class="ITN_text">({{'Internal For Shalash' | translate}})</span>
                        <!-- <mat-error *ngIf="myForm.controls['FirstName'].touched && !myForm.controls['FirstName'].valid">
                            <mat-error *ngIf="myForm.controls['FirstName'].hasError('required') "
                                class="required alert-error">
                                You must include a First Name.
                            </mat-error>
                        </mat-error> -->
                    </div>

                    <div class="form-group">
                        <mat-form-field class="full-wid">
                            <input matInput
                                [placeholder]="'Alternate title for an audition invitation email' | translate"
                                formControlName="invite_msg_title">
                        </mat-form-field>
                        <!-- <mat-error *ngIf="myForm.controls['FirstName'].touched && !myForm.controls['FirstName'].valid">
                                                            <mat-error *ngIf="myForm.controls['FirstName'].hasError('required') "
                                                                class="required alert-error">
                                                                You must include a First Name.
                                                            </mat-error>
                                                        </mat-error> -->
                    </div>

                    <div class="form-group">
                        <mat-form-field class="adsSelect" style="margin-right:39px;">
                            <mat-select [placeholder]="'Audition type' | translate" formControlName="pauditionTypeId">
                                <mat-option *ngFor="let obj of masterData?.types" [value]="obj?.id">{{obj?.typeName}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                        <mat-form-field class="adsSelect">
                            <mat-select [placeholder]="'Audition topic' | translate" formControlName="ptopicId">
                                <mat-option *ngFor="let obj of masterData?.topics" [value]="obj?.id">{{obj?.topicName}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="form-group">
                        <mat-label class="mr-3">{{'Applications closing date' | translate}}</mat-label>
                        <mat-form-field>
                            <input matInput type="datetime-local" min="abc.value" formControlName="pclosingDate">
                        </mat-form-field>
                    </div>

                    <div class="form-group">
                        <mat-form-field class="full-wid">
                            <mat-select [placeholder]="'Referral Type' | translate" formControlName="inOut">
                                <mat-option [value]="1">{{'Incoming' | translate}}</mat-option>
                                <mat-option [value]="2">{{'Outgoing' | translate}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>

                    <div class="form-group">
                        <mat-form-field class="full-wid">
                            <input matInput [matDatepicker]="picker1" [placeholder]="'Audition Date' | translate"
                                formControlName="pauditionDate" #abc>
                            <!-- <input matInput [ngModel]="pickerTwoValue | date:'dd/MM/yyyy'" placeholder="Choose a date"> -->
                            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                            <mat-datepicker #picker1></mat-datepicker>
                        </mat-form-field>
                    </div>
                    <div class="form-group">
                        <mat-form-field class="full-wid">
                            <input matInput [matDatepicker]="picker2" [placeholder]="'Rehearsal Date' | translate"
                                formControlName="prehearsalStart">
                            <!-- <input matInput [ngModel]="pickerTwoValue | date:'dd/MM/yyyy'" placeholder="Choose a date"> -->
                            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                            <mat-datepicker #picker2></mat-datepicker>
                        </mat-form-field>
                    </div>
                    <div class="form-group">
                        <mat-form-field class="full-wid">
                            <input matInput [matDatepicker]="picker3" [placeholder]="'Work Date' | translate"
                                formControlName="pworkStart">
                            <!-- <input matInput [ngModel]="pickerTwoValue | date:'dd/MM/yyyy'" placeholder="Choose a date"> -->
                            <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
                            <mat-datepicker #picker3></mat-datepicker>
                        </mat-form-field>
                    </div>

                    <div class="form-group">
                        <mat-form-field class="full-wid">
                            <textarea matInput [placeholder]="'Location' | translate"
                                formControlName="plocation"></textarea>
                        </mat-form-field>
                    </div>

                    <div class="form-group">
                        <mat-form-field class="full-wid">
                            <textarea matInput [placeholder]="'Description' | translate"
                                formControlName="pdescription"></textarea>
                        </mat-form-field>
                    </div>

                    <div class="form-group">
                        <mat-form-field class="full-wid">
                            <mat-select [placeholder]="'Casting Director' | translate" formControlName="pcasterId">
                                <mat-option *ngFor="let obj of masterData?.casters" [value]="obj?.id">{{obj?.firstName}}
                                    {{obj?.lastName}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="form-group">
                        <mat-form-field class="full-wid">
                            <mat-select [placeholder]="'Fixed' | translate" formControlName="pautoApplication">
                                <mat-option [value]="0">No</mat-option>
                                <mat-option [value]="1">Yes</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="form-group">
                        <mat-form-field class="full-wid">
                            <mat-select [placeholder]="'If fixed, then what text to put' | translate"
                                formControlName="pautoAbilityText">
                                <mat-option [value]="0">{{'No text' | translate}}</mat-option>
                                <mat-option [value]="1">{{'drama' | translate}}</mat-option>
                                <mat-option [value]="2">{{'comical' | translate}}</mat-option>
                                <mat-option [value]="3">{{'musical' | translate}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </form>
                <button *ngIf="!isShown" class="btn btn-primary mat-raised-button mat-button-base mat-primary mr-2"
                    (click)="toggleShow()" type="button"> {{'Show roles' | translate}}
                </button>
                <button *ngIf="isShown" class="btn btn-primary mat-raised-button mat-button-base mat-primary mr-2"
                    (click)="toggleShow()" type="button"> {{'Hide roles' | translate}}
                </button>
                <button *ngIf="currentAuditionId" class="btn btn-primary mat-raised-button mat-button-base mat-primary"
                    type="button" (click)="submitDetails()">{{'Update Audition' | translate}}</button>
                <div *ngIf="isShown">
                    <form [formGroup]="rolesForm">
                        <ul style="list-style: none;padding:0">
                            <li class="add_role" formArrayName="roles"
                                *ngFor="let role of rolesForm.get('roles').controls; let i = index">
                                <div class="table-responsive" [formGroupName]="i">
                                    <table class="table table-striped table-bordered mt-3" mdbTable mdbTableScroll
                                        scrollX="true" maxWidth="400">
                                        <tr>
                                            <td>
                                                <input class="form-control" [placeholder]="'Role name' | translate"
                                                    type="text" formControlName="title" />
                                            </td>
                                            <td>
                                                <mat-form-field class="form-control">
                                                    <mat-select [placeholder]="'Role For' | translate"
                                                        formControlName="gender">
                                                        <mat-option *ngFor="let c of genders" [value]="c.id">
                                                            {{c.name | translate}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </td>
                                            <td>
                                                <mat-form-field class="form-control">
                                                    <mat-select class="form-control"
                                                        [placeholder]="'Age from' | translate" formControlName="minAge">
                                                        <mat-option *ngFor="let a of x" [value]="a">{{a}}</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </td>
                                            <td>
                                                <mat-form-field class="form-control">
                                                    <mat-select class="form-control"
                                                        [placeholder]="'Age to' | translate" formControlName="maxAge">
                                                        <mat-option *ngFor="let until of x" [value]="until">{{until}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </td>
                                            <td>
                                                <mat-form-field class="form-control">
                                                    <mat-select class="form-control"
                                                        [placeholder]="'Budget' | translate"
                                                        formControlName="budgetType">
                                                        <mat-option *ngFor="let option of masterData?.budget"
                                                            [value]="option.id">
                                                            {{option.budgetName}}</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </td>
                                            <td>
                                                <input class="form-control" [placeholder]="'Amount' | translate"
                                                    type="number" formControlName="sum" />
                                            </td>
                                            <td rowspan="2">
                                                <button mat-icon-button color="warn" type="button"
                                                    (click)="removeRole(i, role.value.id)">
                                                    <mat-icon>delete</mat-icon>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3">
                                                <textarea class="form-control" [placeholder]="'Job description' | translate" type="text"
                                                    formControlName="description">
                                                    </textarea>
                                            </td>
                                            <td colspan="3">
                                                <textarea class="form-control" type="text"
                                                    [placeholder]="'Remarks' | translate" formControlName="notes">
                                                    </textarea>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </li>
                        </ul>
                        <div>
                            <button class="btn btn-primary mat-raised-button mat-button-base mat-primary mb-3"
                                type="button" (click)="addItem()">Add Role</button>

                            <button *ngIf="currentAuditionId"
                                class="btn btn-primary mat-raised-button mat-button-base mat-primary ml-2 mr-2"
                                type="button" (click)="onSubmit()">Update roles</button>
                        </div>
                    </form>
                </div>
                <button *ngIf="!currentAuditionId" class="btn btn-primary mat-raised-button mat-button-base mat-primary"
                    type="button" (click)="submitDetails()">Create Audition</button>
            </div>
        </mat-card>
    </div>
</div>